<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Information</title>
</head>
<body>
    <!-- Form to update user information -->
    <h2>Update Information</h2>
    <form id="update-form">
        <label for="new-username">New Username:</label>
        <input type="text" id="new-username" name="new-username"><br>

        <label for="new-email">New Email:</label>
        <input type="email" id="new-email" name="new-email"><br>

        <label for="new-phone">New Phone:</label>
        <input type="tel" id="new-phone" name="new-phone"><br>

        <label for="new-password">New Password:</label>
        <input type="text" id="new-password" name="new-password"><br>

        <button type="submit" onclick="updateUserInformation">Update Information</button>
    </form>

    <!-- Button to delete account -->
    <h2>Delete Account</h2>
    <button id="delete-btn">Delete Account</button>

    <script>
        // JavaScript code to handle form submission and button click events

        // Function to update user information
        function updateUserInformation(event) {
            event.preventDefault();

            // Get updated information from the form
            const newUsername = document.getElementById('new-username').value;
            const newEmail = document.getElementById('new-email').value;
            const newPhone = document.getElementById('new-phone').value;
            const newPassword = document.getElementById('new-password').value;
            const original_username = window.location.pathname.split('/')[2];
            console.log(original_username);
            const formData = {
                newUsername,
                newEmail,
                newPhone,
                newPassword // Add this line
            };

            // Send a POST request to the server with the updated information
            fetch(`/user/${original_username}/update`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            }).catch(error => {
                console.error('Error updating user information:', error);
                alert('Failed to update user information');
            });
        }

        // Function to delete user account
        function deleteUserAccount() {
            // Code to delete user account using AJAX/fetch request
            // Replace this with your actual delete logic
            // Example: fetch('/delete-user', { method: 'DELETE' });

            // After successful deletion, you may redirect the user to a different page or show a confirmation message
            alert('User account deleted successfully!');
        }

        // Add event listeners
        document.getElementById('update-form').addEventListener('submit', updateUserInformation);
        document.getElementById('delete-btn').addEventListener('click', deleteUserAccount);
    </script>
</body>
</html>
